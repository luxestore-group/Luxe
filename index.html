<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luxe Gadget Store</title>

<!-- Fonts & CSS -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Montserrat', sans-serif; background-color:#fff; color:#222; }

/* Header */
header { background: linear-gradient(90deg,#000,#222); color: gold; text-align:center; padding:25px 0; font-size:2em; font-weight:700; letter-spacing:1px; text-shadow:1px 1px 3px #333; }

/* Container */
.container { max-width:1200px; margin:30px auto; display:flex; flex-wrap:wrap; gap:30px; padding:0 15px; }

/* Product Cards */
.products { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:25px; flex:2; }
.card { border:2px solid gold; border-radius:20px; overflow:hidden; transition: transform 0.4s, box-shadow 0.4s; cursor:pointer; background:#fff; }
.card:hover { transform: translateY(-8px) scale(1.03); box-shadow:0 15px 30px rgba(0,0,0,0.4); }
.card img { width:100%; height:220px; object-fit:cover; transition: transform 0.4s; }
.card:hover img { transform:scale(1.05); }
.card-body { padding:20px; text-align:center; }
.card-body h3 { margin-bottom:10px; color:#000; }
.card-body p.price { font-weight:700; color:gold; margin-bottom:10px; font-size:1.2em; }
.card-body button { display:block; width:90%; margin:10px auto; padding:12px 0; border:none; border-radius:12px; font-weight:700; cursor:pointer; transition:all 0.3s; font-size:1em; }
.card-body button.buy { background:linear-gradient(90deg,#000,#555); color:gold; }
.card-body button.buy:hover { background:linear-gradient(90deg,gold,red); color:#fff; transform:scale(1.05); }
.card-body button.whatsapp { background:#25D366; color:#fff; }
.card-body button.whatsapp:hover { opacity:0.9; }

/* Cart */
.cart { flex:1; border:2px solid gold; border-radius:20px; padding:20px; height:min-content; background:#fff; }
.cart h2 { text-align:center; margin-bottom:20px; }
.cart-item { display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #ccc; }
.cart h3 { text-align:right; margin-top:15px; margin-bottom:15px; }
.cart button.checkout { width:100%; padding:12px 0; border:none; border-radius:12px; font-weight:700; font-size:1em; background:linear-gradient(90deg,#000,#555); color:gold; cursor:pointer; }
.cart button.checkout:hover { background:linear-gradient(90deg,gold,red); color:#fff; }

/* Mobile */
@media (max-width:768px){ .container{flex-direction:column;} .cart{width:100%;} .products{width:100%;} }
</style>
</head>
<body>

<header>Luxe Gadget Store</header>

<div class="container">

  <!-- PRODUCTS -->
  <div class="products">

    <div class="card">
      <img src="images/blender.jpg" alt="Blender">
      <div class="card-body">
        <h3>SilverCrest Blender</h3>
        <p class="price">â‚µ300</p>
        <button class="buy" onclick="addToCart('SilverCrest Blender',300)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('SilverCrest Blender',300)">Confirm on WhatsApp</button>
      </div>
    </div>

    <div class="card">
      <img src="images/headphones.jpg" alt="Headphones">
      <div class="card-body">
        <h3>Luxury Headphones</h3>
        <p class="price">â‚µ250</p>
        <button class="buy" onclick="addToCart('Luxury Headphones',250)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('Luxury Headphones',250)">Confirm on WhatsApp</button>
      </div>
    </div>

    <div class="card">
      <img src="images/smartwatch.jpg" alt="Smart Watch">
      <div class="card-body">
        <h3>Smart Watch</h3>
        <p class="price">â‚µ400</p>
        <button class="buy" onclick="addToCart('Smart Watch',400)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('Smart Watch',400)">Confirm on WhatsApp</button>
      </div>
    </div>

    <div class="card">
      <img src="images/accessories.jpg" alt="Accessories">
      <div class="card-body">
        <h3>USB & Cables</h3>
        <p class="price">â‚µ50</p>
        <button class="buy" onclick="addToCart('USB & Cables',50)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('USB & Cables',50)">Confirm on WhatsApp</button>
      </div>
    </div>

    <div class="card">
      <img src="images/data-bundles.jpg" alt="Data Bundles">
      <div class="card-body">
        <h3>MTN Data Bundle</h3>
        <p class="price">â‚µ50</p>
        <button class="buy" onclick="addToCart('MTN Data Bundle',50)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('MTN Data Bundle',50)">Confirm on WhatsApp</button>
      </div>
    </div>

    <div class="card">
      <img src="images/powerbank.jpg" alt="Power Bank">
      <div class="card-body">
        <h3>Power Bank</h3>
        <p class="price">â‚µ150</p>
        <button class="buy" onclick="addToCart('Power Bank',150)">Add to Cart</button>
        <button class="whatsapp" onclick="confirmWhatsApp('Power Bank',150)">Confirm on WhatsApp</button>
      </div>
    </div>

  </div>

  <!-- CART -->
  <div class="cart">
    <h2>Cart</h2>
    <div id="cartItems"></div>
    <h3>Total: â‚µ<span id="total">0</span></h3>
    <button class="checkout" onclick="payNow()">Checkout & Pay</button>
  </div>

</div>

<!-- PAYSTACK -->
<script src="https://js.paystack.co/v1/inline.js"></script>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } 
  from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyCZdOPS1D0pSW8jYjL1p7Q9JpES06Pc-UE",
  authDomain: "luxe-5a8e8.firebaseapp.com",
  projectId: "luxe-5a8e8",
  storageBucket: "luxe-5a8e8.appspot.com",
  messagingSenderId: "178257618326",
  appId: "1:178257618326:web:3c6c26f267dfcf73d3e9b7"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db;
window.addDoc = addDoc;
window.collection = collection;
window.serverTimestamp = serverTimestamp;
</script>

<!-- APP LOGIC -->
<script>
let cart = [];
let total = 0;

// Add to Cart
function addToCart(name, price){
  cart.push({name, price});
  total += price;
  renderCart();
}

// Render Cart
function renderCart(){
  const cartDiv = document.getElementById("cartItems");
  cartDiv.innerHTML = "";
  cart.forEach(item=>{
    cartDiv.innerHTML += `<div class="cart-item"><span>${item.name}</span><span>â‚µ${item.price}</span></div>`;
  });
  document.getElementById("total").innerText = total;
}

// Generate Order ID
function generateOrderID(){
  return "LUXE-" + Date.now();
}

// Paystack Checkout
function payNow(){
  if(cart.length===0){ alert("Cart is empty"); return; }

  let orderID = generateOrderID();

  let handler = PaystackPop.setup({
    key: 'pk_live_98575428080557d261e91cb92fe745f878fc4278',
    email: 'jbellingham771@gmail.com',
    amount: total*100,
    currency: "GHS",
    ref: ''+Math.floor(Math.random()*1000000000+1),
    callback: function(response){
      saveOrder(orderID,response.reference);

      let msg = `Order ID: ${orderID}\nTotal: â‚µ${total}\nItems:\n`;
      cart.forEach(i=> msg += `- ${i.name}\n`);

      window.open(`https://wa.me/0548164533?text=${encodeURIComponent(msg)}`,"_blank");

      cart=[];
      total=0;
      renderCart();
    },
    onClose: function(){ alert("Payment cancelled"); }
  });
  handler.openIframe();
}

// Save Order to Firebase
async function saveOrder(orderID, ref){
  try{
    await addDoc(collection(db,"orders"),{
      orderID,
      reference: ref,
      items: cart,
      total,
      date: serverTimestamp()
    });
  }catch(e){ console.error(e); }
}

// Confirm on WhatsApp
function confirmWhatsApp(name, price){
  let msg = `Hi, I want to confirm purchase of ${name} for â‚µ${price}`;
  window.open(`https://wa.me/0548164533?text=${encodeURIComponent(msg)}`,"_blank");
}
</script>

</body>
</html>
